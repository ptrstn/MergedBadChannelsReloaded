<html>

<head>
</head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.bundle.min.js" integrity="sha256-VNbX9NjQNRW+Bk02G/RO6WiTKuhncWI4Ey7LkSbE+5s=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js" integrity="sha256-SiHXR50l06UwJvHhFY4e5vzwq75vEHH+8fFNpkXePr0=" crossorigin="anonymous"></script>

<script src="javascript/hammerjs/hammer.min.js"></script>
<script src="javascript/chartjs-plugin-zoom/chartjs-plugin-zoom.min.js"></script>

<link href="css/nouislider/nouislider.min.css" rel="stylesheet">
<script src="javascript/nouislider/nouislider.min.js"></script>

<link href="css/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet">
<script src="javascript/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>

<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment-with-locales.min.js"></script>

<link href="css/custom.css" rel="stylesheet">
<script src="javascript/plot.js"></script>
<script src="javascript/loading.js"></script>

<title>
	Merged Bad Channels Tool
</title>

<body>

<div class="panel-group">
	<div class="jumbotron">
		<div class="container">

			<div class="alert alert-info setup-info">
				<div class="row">
					<div class="col-md-6">
						~1a~ Bad components
					</div>
					<div class="col-md-3">
						~1b~ Extreme values
					</div>
					<div class="col-md-3">
						~2~ Run setup
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-6">
					<div class="panel panel-primary module-selection">
						<div class="panel-heading" data-toggle="tooltip" data-placement="auto bottom"   title="First choose your Tracker (sub)parts you want the information about. Then choose appropriate characteristics from the panel in the bottom. ">
							<h4 class="panel-title">
								Bad components selection
							</h4>
						</div>
						<div class="panel-body">
							<div class="panel-group" id="detectorAccordion">
							  	<div class="panel panel-primary">
								    <div class="panel-heading">
								    	<div class="panel-heading-group">
								      		<div class="checkbox panel-title">
					  							<label><input type="checkbox" id="module38"></label>
									  		</div>
										    <h4 class="panel-title">
										    	<a data-toggle="collapse" href="#stripTab" data-parent="#detectorAccordion">Strip</a>
										    </h4>
								      	</div>
								    </div>
								    <div id="stripTab" class="panel-collapse collapse in">
								    	<div class="panel-body">
									      	<div class="row">
										      	<div class="col-md-3">
													<div class="panel-group">
													  	<div class="panel panel-default">
													    	<div class="panel-heading">
													    		<div class="panel-heading-group">
																	<div class="checkbox panel-title">
																		<label><input type="checkbox" id="module37"></label>
																	</div>
														      		<h4 class="panel-title">
														        		<a data-toggle="collapse" href="#tibTab">TIB</a>
														      		</h4>
													      		</div>
													    	</div>
													    	<div id="tibTab" class="panel-collapse collapse">
													      		<div class="panel-body checkbox-checker">
													      			<label><input type="checkbox" id="module33"> TIB Layer 1</label>
													      			<label><input type="checkbox" id="module32"> TIB Layer 2</label>
													      			<label><input type="checkbox" id="module31"> TIB Layer 3</label>
													      			<label><input type="checkbox" id="module30"> TIB Layer 4</label>
													      		</div>
													    	</div>
													  	</div>
													</div> 			      	
										      	</div>
										      	<div class="col-md-3">
										      		<div class="panel-group">
													    <div class="panel panel-default">
														    <div class="panel-heading">
														    	<div class="panel-heading-group">
																	<div class="checkbox panel-title">
																		<label><input type="checkbox" id="module36"></label>
																	</div>						    
															        <h4 class="panel-title">
															        	<a data-toggle="collapse" href="#tidTab">TID</a>
															        </h4>
														        </div>
														    </div>
														    <div id="tidTab" class="panel-collapse collapse">
														        <div class="panel-body">
														        	<div class="checkbox-checker">
																      	<label><input type="checkbox" id="module29"> TID+ Disk 1</label>
																      	<label><input type="checkbox" id="module28"> TID+ Disk 2</label>
																      	<label><input type="checkbox" id="module27"> TID+ Disk 3</label>
															      	</div>
															      	<hr/>
															      	<div class="checkbox-checker">
																      	<label><input type="checkbox" id="module26"> TID- Disk 1</label>
																      	<label><input type="checkbox" id="module25"> TID- Disk 2</label>
																      	<label><input type="checkbox" id="module24"> TID- Disk 3</label>
															      	</div>
														        </div>
														    </div>
													    </div>
													</div>
										      	</div>
										      	<div class="col-md-3">
										      		<div class="panel-group">
													    <div class="panel panel-default">
														    <div class="panel-heading">
														    	<div class="panel-heading-group">
																	<div class="checkbox panel-title">
																		<label><input type="checkbox" id="module35"></label>
																	</div>						    
															        <h4 class="panel-title">
															        	<a data-toggle="collapse" href="#tobTab">TOB</a>
															        </h4>
														        </div>
														    </div>
														    <div id="tobTab" class="panel-collapse collapse">
														        <div class="panel-body checkbox-checker">
														        	<label><input type="checkbox" id="module23"> TOB Layer 1</label>
														        	<label><input type="checkbox" id="module22"> TOB Layer 2</label>
														        	<label><input type="checkbox" id="module21"> TOB Layer 3</label>
														        	<label><input type="checkbox" id="module20"> TOB Layer 4</label>
														        	<label><input type="checkbox" id="module19"> TOB Layer 5</label>
														        	<label><input type="checkbox" id="module18"> TOB Layer 6</label>
														        </div>
														    </div>
													    </div>
													</div>
										      	</div>
										      	<div class="col-md-3">
										      		<div class="panel-group">
													    <div class="panel panel-default">
														    <div class="panel-heading">
														    	<div class="panel-heading-group">
																	<div class="checkbox panel-title">
																		<label><input type="checkbox" id="module34"></label>
																	</div>						    
															        <h4 class="panel-title">
															        	<a data-toggle="collapse" href="#tecTab">TEC</a>
															        </h4>
														        </div>
														    </div>
														    <div id="tecTab" class="panel-collapse collapse">
														      	<div class="panel-body">
														      		<div class="checkbox-checker">
															      		<label><input type="checkbox" id="module17"> TEC+ DISK 1</label>
															      		<label><input type="checkbox" id="module16"> TEC+ DISK 2</label>
															      		<label><input type="checkbox" id="module15"> TEC+ DISK 3</label>
															      		<label><input type="checkbox" id="module14"> TEC+ DISK 4</label>
															      		<label><input type="checkbox" id="module13"> TEC+ DISK 5</label>
															      		<label><input type="checkbox" id="module12"> TEC+ DISK 6</label>
															      		<label><input type="checkbox" id="module11"> TEC+ DISK 7</label>
															      		<label><input type="checkbox" id="module10"> TEC+ DISK 8</label>
															      		<label><input type="checkbox" id="module09"> TEC+ DISK 9</label>
														      		</div>
														      		<hr/>
														      		<div class="checkbox-checker">
															      		<label><input type="checkbox" id="module08"> TEC- DISK 1</label>
															      		<label><input type="checkbox" id="module07"> TEC- DISK 2</label>
															      		<label><input type="checkbox" id="module06"> TEC- DISK 3</label>
															      		<label><input type="checkbox" id="module05"> TEC- DISK 4</label>
															      		<label><input type="checkbox" id="module04"> TEC- DISK 5</label>
															      		<label><input type="checkbox" id="module03"> TEC- DISK 6</label>
															      		<label><input type="checkbox" id="module02"> TEC- DISK 7</label>
															      		<label><input type="checkbox" id="module01"> TEC- DISK 8</label>
															      		<label><input type="checkbox" id="module00"> TEC- DISK 9</label>
														      		</div>
														      	</div>
														    </div>
													    </div>
													</div>
										      	</div>
									        </div>
								        </div>
							    	</div>
							    <!-- <div class="panel-footer" id="stripOptionSelection">
							    	 THE PLACE FOR OPTIONS
							    </div> -->
							   </div>

								<div class="panel panel-primary">
									<div class="panel-heading">
										<div class="panel-heading-group">
											<div class="checkbox panel-title">
						  						<label><input type="checkbox" id="module60"></label>
										  	</div>
											<h4 class="panel-title">
												<a data-toggle="collapse" data-parent="#detectorAccordion" href="#pixelTab">Pixel (clusters)</a>
											</h4>
										</div>
									</div>
									<div id="pixelTab" class="panel-collapse collapse">
										<div class="panel-body">
											<div class="row">

												<div class="col-md-4">
													<div class="panel-group">
													  	<div class="panel panel-default">
													    	<div class="panel-heading">
													    		<div class="panel-heading-group">
																	<div class="checkbox panel-title">
																		<label><input type="checkbox" id="module59"></label>
																	</div>
														      		<h4 class="panel-title">
														        		<a data-toggle="collapse" href="#barrelTab">Barrel</a>
														      		</h4>
													      		</div>
													    	</div>
													    	<div id="barrelTab" class="panel-collapse collapse in">
													      		<div class="panel-body checkbox-checker">
													      			<label><input type="checkbox" id="module58"> Barrel Layer 1</label>
													      			<label><input type="checkbox" id="module57"> Barrel Layer 2</label>
													      			<label><input type="checkbox" id="module56"> Barrel Layer 3</label>
													      			<label><input type="checkbox" id="module55"> Barrel Layer 4</label>
													      		</div>
													    	</div>
													  	</div>
													</div>
												</div>
												<div class="col-md-8">
													<div class="panel-group">
													  	<div class="panel panel-default">
													    	<div class="panel-heading">
													    		<div class="panel-heading-group">
																	<div class="checkbox panel-title">
																		<label><input type="checkbox" id="module54"></label>
																	</div>
														      		<h4 class="panel-title">
														        		<a data-toggle="collapse" href="#endcapTab">Endcap</a>
														      		</h4>
													      		</div>
													    	</div>
													    	<div id="endcapTab" class="panel-collapse collapse in">
													      		<div class="panel-body">

													      			<div class="row checkbox-checker">
													      				<div class="col-md-6">
													      					<label><input type="checkbox" id="module53"> Ring 1 Disk- 1</label>
															      			<label><input type="checkbox" id="module52"> Ring 1 Disk- 2</label>
															      			<label><input type="checkbox" id="module51"> Ring 1 Disk- 3</label>
													      				</div>
													      				<div class="col-md-6">
													      					<label><input type="checkbox" id="module50"> Ring 1 Disk+ 1</label>
															      			<label><input type="checkbox" id="module49"> Ring 1 Disk+ 2</label>
															      			<label><input type="checkbox" id="module48"> Ring 1 Disk+ 3</label>
													      				</div>
													      			</div>
													      			<hr/>
													      			<div class="row checkbox-checker">
													      				<div class="col-md-6">
													      					<label><input type="checkbox" id="module47"> Ring 2 Disk- 1</label>
															      			<label><input type="checkbox" id="module46"> Ring 2 Disk- 2</label>
															      			<label><input type="checkbox" id="module45"> Ring 2 Disk- 3</label>
													      				</div>
													      				<div class="col-md-6">
													      					<label><input type="checkbox" id="module44"> Ring 2 Disk+ 1</label>
															      			<label><input type="checkbox" id="module43"> Ring 2 Disk+ 2</label>
															      			<label><input type="checkbox" id="module42"> Ring 2 Disk+ 3</label>
													      				</div>
													      			</div>
													    
													      		</div>
													    	</div>
													  	</div>
													</div>
												</div>
											</div>
										</div>
									</div>
 									<!-- <div class="panel-footer" id="pixelOptionSelection">
								    	THE PLACE FOR OPTIONS
								    </div> -->
								</div>
								<div class="panel panel-info">
									<div class="panel-heading" data-toggle="tooltip" data-placement="auto bottom"   title="Beware that some component-characteristic pairs are not supported and will not give you the plot you want. For example if you want to get the trend of all IDCs or Noisy Cols in the Barrel you have to check all layers and than Superimpose single layer plots. Only checking the Pixel Barrel will not work in that case.">
										<h4 class="panel-title" style="text-align: center;">Characteristics</h4>
									</div>
									<div class="panel-body">
										<div class = "checkbox-checker" id="stripOptionSelection">
									    	<!-- THE PLACE FOR OPTIONS -->
									    </div>
									    <hr/>
										<div class = "checkbox-checker" id="pixelOptionSelection">
									    	<!-- THE PLACE FOR OPTIONS -->
									    </div>
									</div>
								</div>
							</div>
						</div>
					</div> 
				</div>

				<div class="col-md-3">
					<div class="panel panel-primary minmaxPanel">
						<div class="panel-heading" data-toggle="tooltip" data-placement="auto bottom"   title="Choose extreme characteristics to plot.">
							<h4 class="panel-title">Min/Max trend selection</h4>
						</div>
						<div class="panel-body" id="minmax-selection">
				    		<div class="row">
				    			<div class="col-md-offset-8 col-md-2">
				    				MIN
				    			</div>
				    			<div class="col-md-2">
				    				MAX
				    			</div>
				    		</div>
			    		</div>
					</div>
				</div>
				
				<div class="col-md-3">
					<div class="panel panel-primary option-selection">
					    <div class="panel-heading">
					    	Options
					    	<div id="expertModeSwitchContainer">
						    	<label class="checkbox-inline" data-toggle="tooltip" data-placement="auto bottom"   title="Enable/disable advanced run range picking mode.">
						    		<input data-toggle="toggle" type="checkbox" id="expertModeToggle" data-on="Expert mode: ON" data-off="Expert mode: OFF", data-size="mini" data-onstyle="danger" data-offstyle="primary" data-width="150">
						    	</label>
					    	</div>
					    </div>
					    <div class="panel-body">

						    <div id="userDataPickingPanelBody">

						    	<label class="checkbox-inline" data-toggle="tooltip" data-placement="auto bottom"   title="Switch between explicite/date based run range picking.">
						    		<input data-toggle="toggle" type="checkbox" data-on="Run" data-off="<span class='glyphicon glyphicon-calendar'></span> Time" data-size="small" id="runDateToggle" data-onstyle="primary" data-offstyle="info">
						    	</label>						    	

						    	<div id="runPicker">
							    	<div class="form-inline" id="runRangePicker">
							    		<div class="form-group">
							    			<input class="form-control" id="runMin" type="text" placeholder="RUN MIN" data-toggle="tooltip" data-placement="auto bottom"   title="Run range start number.">
							    		</div>
							    		<div class="form-group">
							    			<input class="form-control" id="runMax" type="text" placeholder="RUN MAX" data-toggle="tooltip" data-placement="auto bottom"   title="Run range end number.">
							    		</div>

							    		<div id="slider" data-toggle="tooltip" data-placement="auto bottom"   title="Range picker."></div>
							    	</div>

									<div class="input-daterange input-group" id="datePicker">
								        <input type="text" class="form-control" name="start" placeholder="DATE START" id="dateStart" data-toggle="tooltip" data-placement="auto bottom"   title="Run range start date."/>
								        <span class="input-group-addon">to</span>
								        <input type="text" class="form-control" name="end" placeholder="DATE END" id="dateEnd" data-toggle="tooltip" data-placement="auto bottom"   title="Run range end date."/>
								    </div>
							    </div>
							</div>
							<div id = "expertDataPickingPanelBody">
								<label for="expertQuery">Query:</label>
								<textarea class="form-control" rows="5" id="expertQuery" placeholder="where r.runnumber between 290000 and 295000 and r.pixel_present = 1 and r.tracker_present = 1" data-toggle="tooltip" data-placement="auto bottom"   title="This selection query will be used to pick desired runs."></textarea>
								<div id="expertHelpSection">
									Need help with running custom queries? Visit: 
									<a href="http://runregistry.web.cern.ch/runregistry/" target="_blank">Run Registry</a> or 
									<a href="https://twiki.cern.ch/twiki/bin/view/CMS/DqmRrApi" target="_blank">TWiki</a>
								</div>
							</div>
					    	<div class="row" style="padding-bottom: 15px;">
					    		<div class="col-md-6" style="text-align: right; font-weight: bold">
					    			Data type: 
					    		</div>
					    		<div class="col-md-6" style="text-align: center;">
						    		<label class="checkbox-inline" style="width: 100%" data-toggle="tooltip" data-placement="auto bottom"   title="Switch between BEAM and COSMIC runs.">
										<input data-toggle="toggle" type="checkbox" id="beam-cosmics-switch" data-on="COSMICS" data-off="BEAM" data-offstyle="danger" data-onstyle="info" data-width="100%" data-size="small" >
									</label>
								</div>
					    	</div>
					    	<div class="row">
					   			<div class="col-md-6" style="text-align: right; font-weight: bold">
					   				PromptReco type:
					   			</div>
					   			<div class="col-md-6">
					   				<input type="text" id="propmtRecoDataset" placeholder="e.g. ZeroBias" style="width: 100%; text-align: center;" data-toggle="tooltip" data-placement="auto bottom"   title="Default: StreamExpress.">
					   			</div>
					    	</div>
					    	<hr/>
					    	<div class="row">
					    		<div class="col-md-12" style="text-align: right;">
							    	Need 
							    	<a href="https://indico.cern.ch/event/624099/contributions/2638022/attachments/1482053/2384124/presentation_updated.pdf">help</a>?
						    	</div>
					    	</div>
					    </div>
					</div>

					<button class="btn btn-warning btn-block" id="plotImages" data-toggle="tooltip" data-placement="auto bottom"   title="Plot data. Keep in mind that for big run ranges that process may take a while.">Start plotting</button>
				</div>

			</div>
		</div>
	</div>
</div>

<div id="plotControlPanel">

	<label class="checkbox-inline" data-toggle="tooltip" data-placement="auto bottom" title="Hide all plots besides superimposed one" style="display: hidden">
		<input data-toggle="toggle" type="checkbox" id="hideSuperimposedData" data-on="<span class='glyphicon glyphicon-eye-close'></span> Hide components" data-off="<span class='glyphicon glyphicon-eye-open'></span> Leave components", data-size="small" data-offstyle="info" data-width="150">
	</label>
	<label class="checkbox-inline" data-toggle="tooltip" data-placement="auto bottom" title="Switch whether to plot superimposition of all trends or not.">
		<input data-toggle="toggle" type="checkbox" id="superimposeData" data-on="<span class='glyphicon glyphicon-plus'></span> Superimpose" data-off="Superimpose OFF", data-size="small" data-offstyle="info" data-width="150">
	</label>

	<label class="checkbox-inline" data-toggle="tooltip" data-placement="auto bottom" title="Choosing 'Run by run' results in a single bin for each run. 'Run length' takes time length of a run into account - depending on it each run has different number of bins.">
		<input data-toggle="toggle" type="checkbox" id="careAboutRunLength" data-on="<span class='glyphicon glyphicon-time'></span> Run length" data-off="Run by run", data-size="small" data-offstyle="info" data-width="100">
	</label>

	<label class="checkbox-inline" data-toggle="tooltip" data-placement="auto bottom" title="Switch between absolute and relative values for each plot. If relative values are chosen only plots that can be normalized are shown.">
		<input data-toggle="toggle" type="checkbox" id="absoluteRelativeValues" data-on="Relative" data-off="Absolute", data-size="small" data-offstyle="info" data-width="100">
	</label>

	<label class="checkbox-inline" data-toggle="tooltip" data-placement="auto bottom" title="Choose between linear or logarythmic Y-axis.">
		<input data-toggle="toggle" type="checkbox" id="linLogToggle" data-on="Log" data-off="Lin", data-size="small" data-offstyle="info" data-width="100">
	</label>
	<button class="btn btn-default btn-sm" id="resetViewBtn" data-toggle="tooltip" data-placement="auto bottom" title="Resets the canvas. Makes data fit into the view."><span class="glyphicon glyphicon-refresh"></span> Reset View</button>
	<button class="btn btn-default btn-sm" id="plotSaveBtn" data-toggle="tooltip" data-placement="auto bottom" title="Save current plot view as a png image."><span class="glyphicon glyphicon-floppy-disk"></span> Save Plot</button>
</div>

<div class="container" id="plotContainer" style="display: none">
	<canvas id="thePlot"></canvas>
</div>

</body>
</html>